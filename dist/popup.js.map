{
  "version": 3,
  "sources": ["../node_modules/loglevel/lib/loglevel.js", "../src/log.js", "../src/api.js", "../src/popup.js"],
  "sourcesContent": ["/*\n* loglevel - https://github.com/pimterry/loglevel\n*\n* Copyright (c) 2013 Tim Perry\n* Licensed under the MIT license.\n*/\n(function (root, definition) {\n    \"use strict\";\n    if (typeof define === 'function' && define.amd) {\n        define(definition);\n    } else if (typeof module === 'object' && module.exports) {\n        module.exports = definition();\n    } else {\n        root.log = definition();\n    }\n}(this, function () {\n    \"use strict\";\n\n    // Slightly dubious tricks to cut down minimized file size\n    var noop = function() {};\n    var undefinedType = \"undefined\";\n    var isIE = (typeof window !== undefinedType) && (typeof window.navigator !== undefinedType) && (\n        /Trident\\/|MSIE /.test(window.navigator.userAgent)\n    );\n\n    var logMethods = [\n        \"trace\",\n        \"debug\",\n        \"info\",\n        \"warn\",\n        \"error\"\n    ];\n\n    // Cross-browser bind equivalent that works at least back to IE6\n    function bindMethod(obj, methodName) {\n        var method = obj[methodName];\n        if (typeof method.bind === 'function') {\n            return method.bind(obj);\n        } else {\n            try {\n                return Function.prototype.bind.call(method, obj);\n            } catch (e) {\n                // Missing bind shim or IE8 + Modernizr, fallback to wrapping\n                return function() {\n                    return Function.prototype.apply.apply(method, [obj, arguments]);\n                };\n            }\n        }\n    }\n\n    // Trace() doesn't print the message in IE, so for that case we need to wrap it\n    function traceForIE() {\n        if (console.log) {\n            if (console.log.apply) {\n                console.log.apply(console, arguments);\n            } else {\n                // In old IE, native console methods themselves don't have apply().\n                Function.prototype.apply.apply(console.log, [console, arguments]);\n            }\n        }\n        if (console.trace) console.trace();\n    }\n\n    // Build the best logging method possible for this env\n    // Wherever possible we want to bind, not wrap, to preserve stack traces\n    function realMethod(methodName) {\n        if (methodName === 'debug') {\n            methodName = 'log';\n        }\n\n        if (typeof console === undefinedType) {\n            return false; // No method possible, for now - fixed later by enableLoggingWhenConsoleArrives\n        } else if (methodName === 'trace' && isIE) {\n            return traceForIE;\n        } else if (console[methodName] !== undefined) {\n            return bindMethod(console, methodName);\n        } else if (console.log !== undefined) {\n            return bindMethod(console, 'log');\n        } else {\n            return noop;\n        }\n    }\n\n    // These private functions always need `this` to be set properly\n\n    function replaceLoggingMethods(level, loggerName) {\n        /*jshint validthis:true */\n        for (var i = 0; i < logMethods.length; i++) {\n            var methodName = logMethods[i];\n            this[methodName] = (i < level) ?\n                noop :\n                this.methodFactory(methodName, level, loggerName);\n        }\n\n        // Define log.log as an alias for log.debug\n        this.log = this.debug;\n    }\n\n    // In old IE versions, the console isn't present until you first open it.\n    // We build realMethod() replacements here that regenerate logging methods\n    function enableLoggingWhenConsoleArrives(methodName, level, loggerName) {\n        return function () {\n            if (typeof console !== undefinedType) {\n                replaceLoggingMethods.call(this, level, loggerName);\n                this[methodName].apply(this, arguments);\n            }\n        };\n    }\n\n    // By default, we use closely bound real methods wherever possible, and\n    // otherwise we wait for a console to appear, and then try again.\n    function defaultMethodFactory(methodName, level, loggerName) {\n        /*jshint validthis:true */\n        return realMethod(methodName) ||\n               enableLoggingWhenConsoleArrives.apply(this, arguments);\n    }\n\n    function Logger(name, defaultLevel, factory) {\n      var self = this;\n      var currentLevel;\n      defaultLevel = defaultLevel == null ? \"WARN\" : defaultLevel;\n\n      var storageKey = \"loglevel\";\n      if (typeof name === \"string\") {\n        storageKey += \":\" + name;\n      } else if (typeof name === \"symbol\") {\n        storageKey = undefined;\n      }\n\n      function persistLevelIfPossible(levelNum) {\n          var levelName = (logMethods[levelNum] || 'silent').toUpperCase();\n\n          if (typeof window === undefinedType || !storageKey) return;\n\n          // Use localStorage if available\n          try {\n              window.localStorage[storageKey] = levelName;\n              return;\n          } catch (ignore) {}\n\n          // Use session cookie as fallback\n          try {\n              window.document.cookie =\n                encodeURIComponent(storageKey) + \"=\" + levelName + \";\";\n          } catch (ignore) {}\n      }\n\n      function getPersistedLevel() {\n          var storedLevel;\n\n          if (typeof window === undefinedType || !storageKey) return;\n\n          try {\n              storedLevel = window.localStorage[storageKey];\n          } catch (ignore) {}\n\n          // Fallback to cookies if local storage gives us nothing\n          if (typeof storedLevel === undefinedType) {\n              try {\n                  var cookie = window.document.cookie;\n                  var location = cookie.indexOf(\n                      encodeURIComponent(storageKey) + \"=\");\n                  if (location !== -1) {\n                      storedLevel = /^([^;]+)/.exec(cookie.slice(location))[1];\n                  }\n              } catch (ignore) {}\n          }\n\n          // If the stored level is not valid, treat it as if nothing was stored.\n          if (self.levels[storedLevel] === undefined) {\n              storedLevel = undefined;\n          }\n\n          return storedLevel;\n      }\n\n      function clearPersistedLevel() {\n          if (typeof window === undefinedType || !storageKey) return;\n\n          // Use localStorage if available\n          try {\n              window.localStorage.removeItem(storageKey);\n              return;\n          } catch (ignore) {}\n\n          // Use session cookie as fallback\n          try {\n              window.document.cookie =\n                encodeURIComponent(storageKey) + \"=; expires=Thu, 01 Jan 1970 00:00:00 UTC\";\n          } catch (ignore) {}\n      }\n\n      /*\n       *\n       * Public logger API - see https://github.com/pimterry/loglevel for details\n       *\n       */\n\n      self.name = name;\n\n      self.levels = { \"TRACE\": 0, \"DEBUG\": 1, \"INFO\": 2, \"WARN\": 3,\n          \"ERROR\": 4, \"SILENT\": 5};\n\n      self.methodFactory = factory || defaultMethodFactory;\n\n      self.getLevel = function () {\n          return currentLevel;\n      };\n\n      self.setLevel = function (level, persist) {\n          if (typeof level === \"string\" && self.levels[level.toUpperCase()] !== undefined) {\n              level = self.levels[level.toUpperCase()];\n          }\n          if (typeof level === \"number\" && level >= 0 && level <= self.levels.SILENT) {\n              currentLevel = level;\n              if (persist !== false) {  // defaults to true\n                  persistLevelIfPossible(level);\n              }\n              replaceLoggingMethods.call(self, level, name);\n              if (typeof console === undefinedType && level < self.levels.SILENT) {\n                  return \"No console available for logging\";\n              }\n          } else {\n              throw \"log.setLevel() called with invalid level: \" + level;\n          }\n      };\n\n      self.setDefaultLevel = function (level) {\n          defaultLevel = level;\n          if (!getPersistedLevel()) {\n              self.setLevel(level, false);\n          }\n      };\n\n      self.resetLevel = function () {\n          self.setLevel(defaultLevel, false);\n          clearPersistedLevel();\n      };\n\n      self.enableAll = function(persist) {\n          self.setLevel(self.levels.TRACE, persist);\n      };\n\n      self.disableAll = function(persist) {\n          self.setLevel(self.levels.SILENT, persist);\n      };\n\n      // Initialize with the right level\n      var initialLevel = getPersistedLevel();\n      if (initialLevel == null) {\n          initialLevel = defaultLevel;\n      }\n      self.setLevel(initialLevel, false);\n    }\n\n    /*\n     *\n     * Top-level API\n     *\n     */\n\n    var defaultLogger = new Logger();\n\n    var _loggersByName = {};\n    defaultLogger.getLogger = function getLogger(name) {\n        if ((typeof name !== \"symbol\" && typeof name !== \"string\") || name === \"\") {\n          throw new TypeError(\"You must supply a name when creating a logger.\");\n        }\n\n        var logger = _loggersByName[name];\n        if (!logger) {\n          logger = _loggersByName[name] = new Logger(\n            name, defaultLogger.getLevel(), defaultLogger.methodFactory);\n        }\n        return logger;\n    };\n\n    // Grab the current global log variable in case of overwrite\n    var _log = (typeof window !== undefinedType) ? window.log : undefined;\n    defaultLogger.noConflict = function() {\n        if (typeof window !== undefinedType &&\n               window.log === defaultLogger) {\n            window.log = _log;\n        }\n\n        return defaultLogger;\n    };\n\n    defaultLogger.getLoggers = function getLoggers() {\n        return _loggersByName;\n    };\n\n    // ES6 default export, for compatibility\n    defaultLogger['default'] = defaultLogger;\n\n    return defaultLogger;\n}));\n", "import loglevel from 'loglevel'\n\nif (process.env.NODE_ENV === 'production') {\n  // It should be this by default - but that isn't happening, so setting it manually\n  loglevel.setLevel('warn')\n} else {\n  loglevel.setLevel('debug')\n}\n\nexport default loglevel\n", "const requestProps = (reviewToken = false, extraProps = {}) => {\n  const headers = { 'Content-Type': 'application/json' }\n  if (reviewToken) {\n    headers.Authorization = `Bearer ${reviewToken}`\n  }\n\n  const defaultProps = {\n    method: 'POST', // because default to some method\n    async: true,\n    headers: headers,\n    contentType: 'json'\n  }\n  return { ...defaultProps, ...extraProps }\n}\n\n// Returns true/false\nconst isReviewTokenValid = (authUrl, reviewToken) => new Promise((resolve, reject) => {\n  const authStatusUrl = `${authUrl}/status`\n\n  return fetch(authStatusUrl, requestProps(reviewToken, { method: 'GET' }))\n    .then(response => response.json()\n      .then((json) => {\n        resolve(json.message !== 'missing user' && response.status === 200)\n      })\n    ).catch((e) => {\n      reject(e)\n    })\n})\n\nconst getReviewToken = (authUrl, loginFormData) => new Promise((resolve, reject) => {\n  const rProps = {\n    method: 'POST',\n    async: true,\n    headers: { 'Content-Type': 'application/json' },\n    contentType: 'json',\n    body: loginFormData\n  }\n  return fetch(authUrl, rProps)\n    .then(response => response.json()\n      .then((json) => {\n        let result = {}\n        if (response.status !== 200 || typeof (json.review_token) === 'undefined' || json.review_token === null) {\n          result.messages = [['error', json.message]]\n        } else {\n          result = { reviewToken: json.review_token, messages: [['success', 'authenticated']] }\n        }\n        resolve(result)\n      })\n    ).catch((e) => {\n      reject(e)\n    })\n})\n\nconst submitReview = (reviewUrl, reviewToken, reviewFormData) => new Promise((resolve, reject) => {\n  const rProps = requestProps(reviewToken, { body: reviewFormData })\n\n  return fetch(reviewUrl, rProps)\n    .then(response => response.json()\n      .then((json) => {\n        if (response.status === 200) {\n          resolve({ success: true, messages: [['success', json.message]] })\n        } else {\n          resolve({ success: false, messages: [['error', json.message]] })\n        }\n      })\n    ).catch((e) => {\n      reject(e)\n    })\n})\n\nexport default {\n  getReviewToken,\n  isReviewTokenValid,\n  requestProps,\n  submitReview\n}\n", "import log from './log' // eslint-disable-line\nimport api from './api' // eslint-disable-line\n\n\ndocument.getElementById('review_timezone').value = Intl.DateTimeFormat().resolvedOptions().timeZone\n\n\n\n\n// Oh Chrome, it would be great if you used `browser` instead of `chrome`\nif (process.env.browser_target == 'chrome') { browser = chrome } // eslint-disable-line\n\nbrowser.storage.local.get('reviewToken')\n  .then(data => data.reviewToken)\n  .then(reviewToken => {\n    if (typeof (reviewToken) === 'undefined' || reviewToken === null) {\n      loginTime()\n    } else {\n      window.reviewToken = reviewToken\n      reviewTime()\n      checkReviewToken(reviewToken)\n    }\n  })\n\nbrowser.storage.local.get('topicsVisible')\n  .then(data => data.topicsVisible)\n  .then(topicsVisible => { toggleTopicsVisible(topicsVisible, true) })\n\nbrowser.tabs.query({ active: true, currentWindow: true }, function (tabs) {\n  // since only one tab should be active and in the current window at once\n  // the return variable should only have one entry\n  const activeTab = tabs[0]\n  // window.storedTabUrl = activeTab.url // this is available in updateReviewFields\n  // log.debug(tabs[0])\n  updateReviewFields(activeTab.url, activeTab.title)\n})\n\nconst checkReviewToken = async function (token) {\n  const authUrl = formAuthUrl()\n  if (typeof (authUrl) === 'undefined' || authUrl === null) {\n    log.debug('authUrl not present in DOM, trying again in 50ms')\n    return setTimeout(checkReviewToken, 50, token)\n  }\n  // log.debug('checking review token:', token)\n  const result = await api.isReviewTokenValid(authUrl, token)\n  if (result) { return }\n  // Remove the existing data that is incorrect - maybe actually do in form submit?\n  browser.storage.local.remove('reviewToken')\n  window.reviewToken = undefined\n  loginTime()\n}\n\nconst updateReviewFields = (tabUrl, title) => {\n  // pause and rerun if DOM hasn't loaded\n  const reviewUrlField = document.getElementById('submitted_url')\n  if (typeof (reviewUrlField) === 'undefined' || reviewUrlField === null) {\n    log.debug('reviewUrlField not present in DOM, trying again in 50ms')\n    return setTimeout(updateReviewFields, 50, tabUrl, title)\n  }\n  reviewUrlField.value = tabUrl\n  document.getElementById('citation_title').value = title\n}\n\nconst formAuthUrl = () => document.getElementById('new_user')?.getAttribute('action')\nconst formNewReviewUrl = () => document.getElementById('new_review')?.getAttribute('action')\n\nconst loginTime = () => {\n  // log.debug(\"it's login time\")\n  const loginForm = document.getElementById('new_user')\n  if (typeof (loginForm) === 'undefined' || loginForm === null) {\n    log.debug('login form not present in DOM, trying again in 50ms')\n    return setTimeout(loginTime, 50)\n  }\n  loginForm.classList.remove('hidden')\n  document.getElementById('new_review')?.classList?.add('hidden')\n  loginForm.addEventListener('submit', handleLoginSubmit)\n}\n\nconst reviewTime = () => {\n  const reviewForm = document.getElementById('new_review')\n  if (typeof (reviewForm) === 'undefined' || reviewForm === null) {\n    log.debug('review form not present in DOM, trying again in 50ms')\n    return setTimeout(reviewTime, 50)\n  }\n  // I think it's a good thing to attach the event listener to the review form\n  reviewForm.addEventListener('submit', handleReviewSubmit)\n  // Attach the menu functionality\n  document.getElementById('review-menu-btn').addEventListener('click', toggleMenu)\n  document.querySelectorAll('#review-menu .form-control-check input').forEach(el => el.addEventListener('change', updateMenuCheck))\n  document.getElementById('logout-btn').addEventListener('click', logout)\n  // ... but only show or hide the form if reviewToken is set, in case of weird callback stuff\n  if (window.reviewToken) {\n    document.getElementById('new_user').classList.add('hidden')\n    reviewForm.classList.remove('hidden')\n  }\n}\n\nconst handleLoginSubmit = async function (e) {\n  e.preventDefault()\n  const formData = new FormData(document.getElementById('new_user'))\n  const jsonFormData = JSON.stringify(Object.fromEntries(formData))\n\n  const result = await api.getReviewToken(formAuthUrl(), jsonFormData)\n  // log.debug(result)\n\n  if (typeof (result.reviewToken) === 'undefined' || result.reviewToken === null) {\n    renderAlerts(result.messages)\n  } else {\n    browser.storage.local.set(result)\n    window.reviewToken = result.reviewToken\n    hideAlerts()\n    reviewTime()\n  }\n\n  return false // fallback prevent submit\n}\n\nconst handleReviewSubmit = async function (e) {\n  e.preventDefault()\n  const formData = new FormData(document.getElementById('new_review'))\n  const jsonFormData = JSON.stringify(Object.fromEntries(formData))\n  const result = await api.submitReview(formNewReviewUrl(), window.reviewToken, jsonFormData)\n  // log.debug(result)\n\n  renderAlerts(result.messages)\n  if (result.success) {\n    document.getElementById('new_review').classList.add('hidden')\n    // Close the popup after pause\n    return setTimeout(window.close, 2000)\n  }\n\n  return false // fallback prevent submit\n}\n\nconst hideAlerts = () => {\n  const visibleAlerts = document.querySelectorAll('.alert')\n  visibleAlerts.forEach(el => el.classList.add('hidden'))\n}\n\nconst renderAlerts = (messages) => {\n  hideAlerts()\n  // messages are arrays of: [kind, text]\n  messages.forEach(arr => {\n    const body = document.getElementById('body-popup')\n    const alert = document.createElement('div')\n    alert.textContent = arr[1]\n    alert.classList.add(`alert-${arr[0]}`, 'alert', 'my-4')\n    body.prepend(alert)\n  })\n}\n\nconst toggleTopicsVisible = (isVisible, isOnLoad = false) => {\n  window.topicsVisibile = isVisible\n  const topicsField = document.getElementById('field-group-topics')\n  if (typeof (topicsField) === 'undefined' || topicsField === null) {\n    log.debug('topics field not present in DOM, trying again in 50ms')\n    return setTimeout(toggleTopicsVisible, 50, isVisible, isOnLoad)\n  }\n  if (window.topicsVisibile) {\n    topicsField.classList.remove('hidden')\n  } else {\n    topicsField.classList.add('hidden')\n  }\n  // If it's on load, set the checkbox - otherwise, set the local storage\n  if (isOnLoad) {\n    document.getElementById('show_topics').checked = isVisible\n  } else {\n    browser.storage.local.set({ topicsVisible: isVisible })\n  }\n}\n\n// closeMenu can be: [\"toggle\", true, false]\nconst toggleMenu = (e = null, closeMenu = 'toggle') => {\n  e?.preventDefault()\n  const menuBtn = document.getElementById('review-menu-btn')\n  const menu = document.getElementById('review-menu')\n  const action = closeMenu === 'toggle' ? menu.classList.contains('active') : closeMenu\n  if (action) {\n    menu.classList.add('hidden')\n    menu.classList.remove('active')\n    menuBtn.classList.remove('active')\n  } else {\n    menu.classList.remove('hidden')\n    menu.classList.add('active')\n    menuBtn.classList.add('active')\n  }\n}\nconst updateMenuCheck = (e) => {\n  const el = e.target\n  const fieldId = el.getAttribute('data-target-id')\n\n  if (fieldId === 'field-group-topics') {\n    toggleTopicsVisible(el.checked)\n  } else if (el.checked) {\n    document.getElementById(fieldId).classList.remove('hidden')\n  } else {\n    document.getElementById(fieldId).classList.add('hidden')\n  }\n}\n\nconst logout = () => {\n  browser.storage.local.remove('reviewToken')\n  toggleMenu(null, true)\n  loginTime()\n}\n"],
  "mappings": "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",
  "names": ["loglevel"]
}
