{
  "version": 3,
  "sources": ["../node_modules/loglevel/lib/loglevel.js", "../src/log.js", "../src/api.js", "../src/utilities.js", "../src/rating.js", "../src/login.js", "../src/popup.js"],
  "sourcesContent": ["/*\n* loglevel - https://github.com/pimterry/loglevel\n*\n* Copyright (c) 2013 Tim Perry\n* Licensed under the MIT license.\n*/\n(function (root, definition) {\n    \"use strict\";\n    if (typeof define === 'function' && define.amd) {\n        define(definition);\n    } else if (typeof module === 'object' && module.exports) {\n        module.exports = definition();\n    } else {\n        root.log = definition();\n    }\n}(this, function () {\n    \"use strict\";\n\n    // Slightly dubious tricks to cut down minimized file size\n    var noop = function() {};\n    var undefinedType = \"undefined\";\n    var isIE = (typeof window !== undefinedType) && (typeof window.navigator !== undefinedType) && (\n        /Trident\\/|MSIE /.test(window.navigator.userAgent)\n    );\n\n    var logMethods = [\n        \"trace\",\n        \"debug\",\n        \"info\",\n        \"warn\",\n        \"error\"\n    ];\n\n    // Cross-browser bind equivalent that works at least back to IE6\n    function bindMethod(obj, methodName) {\n        var method = obj[methodName];\n        if (typeof method.bind === 'function') {\n            return method.bind(obj);\n        } else {\n            try {\n                return Function.prototype.bind.call(method, obj);\n            } catch (e) {\n                // Missing bind shim or IE8 + Modernizr, fallback to wrapping\n                return function() {\n                    return Function.prototype.apply.apply(method, [obj, arguments]);\n                };\n            }\n        }\n    }\n\n    // Trace() doesn't print the message in IE, so for that case we need to wrap it\n    function traceForIE() {\n        if (console.log) {\n            if (console.log.apply) {\n                console.log.apply(console, arguments);\n            } else {\n                // In old IE, native console methods themselves don't have apply().\n                Function.prototype.apply.apply(console.log, [console, arguments]);\n            }\n        }\n        if (console.trace) console.trace();\n    }\n\n    // Build the best logging method possible for this env\n    // Wherever possible we want to bind, not wrap, to preserve stack traces\n    function realMethod(methodName) {\n        if (methodName === 'debug') {\n            methodName = 'log';\n        }\n\n        if (typeof console === undefinedType) {\n            return false; // No method possible, for now - fixed later by enableLoggingWhenConsoleArrives\n        } else if (methodName === 'trace' && isIE) {\n            return traceForIE;\n        } else if (console[methodName] !== undefined) {\n            return bindMethod(console, methodName);\n        } else if (console.log !== undefined) {\n            return bindMethod(console, 'log');\n        } else {\n            return noop;\n        }\n    }\n\n    // These private functions always need `this` to be set properly\n\n    function replaceLoggingMethods(level, loggerName) {\n        /*jshint validthis:true */\n        for (var i = 0; i < logMethods.length; i++) {\n            var methodName = logMethods[i];\n            this[methodName] = (i < level) ?\n                noop :\n                this.methodFactory(methodName, level, loggerName);\n        }\n\n        // Define log.log as an alias for log.debug\n        this.log = this.debug;\n    }\n\n    // In old IE versions, the console isn't present until you first open it.\n    // We build realMethod() replacements here that regenerate logging methods\n    function enableLoggingWhenConsoleArrives(methodName, level, loggerName) {\n        return function () {\n            if (typeof console !== undefinedType) {\n                replaceLoggingMethods.call(this, level, loggerName);\n                this[methodName].apply(this, arguments);\n            }\n        };\n    }\n\n    // By default, we use closely bound real methods wherever possible, and\n    // otherwise we wait for a console to appear, and then try again.\n    function defaultMethodFactory(methodName, level, loggerName) {\n        /*jshint validthis:true */\n        return realMethod(methodName) ||\n               enableLoggingWhenConsoleArrives.apply(this, arguments);\n    }\n\n    function Logger(name, defaultLevel, factory) {\n      var self = this;\n      var currentLevel;\n      defaultLevel = defaultLevel == null ? \"WARN\" : defaultLevel;\n\n      var storageKey = \"loglevel\";\n      if (typeof name === \"string\") {\n        storageKey += \":\" + name;\n      } else if (typeof name === \"symbol\") {\n        storageKey = undefined;\n      }\n\n      function persistLevelIfPossible(levelNum) {\n          var levelName = (logMethods[levelNum] || 'silent').toUpperCase();\n\n          if (typeof window === undefinedType || !storageKey) return;\n\n          // Use localStorage if available\n          try {\n              window.localStorage[storageKey] = levelName;\n              return;\n          } catch (ignore) {}\n\n          // Use session cookie as fallback\n          try {\n              window.document.cookie =\n                encodeURIComponent(storageKey) + \"=\" + levelName + \";\";\n          } catch (ignore) {}\n      }\n\n      function getPersistedLevel() {\n          var storedLevel;\n\n          if (typeof window === undefinedType || !storageKey) return;\n\n          try {\n              storedLevel = window.localStorage[storageKey];\n          } catch (ignore) {}\n\n          // Fallback to cookies if local storage gives us nothing\n          if (typeof storedLevel === undefinedType) {\n              try {\n                  var cookie = window.document.cookie;\n                  var location = cookie.indexOf(\n                      encodeURIComponent(storageKey) + \"=\");\n                  if (location !== -1) {\n                      storedLevel = /^([^;]+)/.exec(cookie.slice(location))[1];\n                  }\n              } catch (ignore) {}\n          }\n\n          // If the stored level is not valid, treat it as if nothing was stored.\n          if (self.levels[storedLevel] === undefined) {\n              storedLevel = undefined;\n          }\n\n          return storedLevel;\n      }\n\n      function clearPersistedLevel() {\n          if (typeof window === undefinedType || !storageKey) return;\n\n          // Use localStorage if available\n          try {\n              window.localStorage.removeItem(storageKey);\n              return;\n          } catch (ignore) {}\n\n          // Use session cookie as fallback\n          try {\n              window.document.cookie =\n                encodeURIComponent(storageKey) + \"=; expires=Thu, 01 Jan 1970 00:00:00 UTC\";\n          } catch (ignore) {}\n      }\n\n      /*\n       *\n       * Public logger API - see https://github.com/pimterry/loglevel for details\n       *\n       */\n\n      self.name = name;\n\n      self.levels = { \"TRACE\": 0, \"DEBUG\": 1, \"INFO\": 2, \"WARN\": 3,\n          \"ERROR\": 4, \"SILENT\": 5};\n\n      self.methodFactory = factory || defaultMethodFactory;\n\n      self.getLevel = function () {\n          return currentLevel;\n      };\n\n      self.setLevel = function (level, persist) {\n          if (typeof level === \"string\" && self.levels[level.toUpperCase()] !== undefined) {\n              level = self.levels[level.toUpperCase()];\n          }\n          if (typeof level === \"number\" && level >= 0 && level <= self.levels.SILENT) {\n              currentLevel = level;\n              if (persist !== false) {  // defaults to true\n                  persistLevelIfPossible(level);\n              }\n              replaceLoggingMethods.call(self, level, name);\n              if (typeof console === undefinedType && level < self.levels.SILENT) {\n                  return \"No console available for logging\";\n              }\n          } else {\n              throw \"log.setLevel() called with invalid level: \" + level;\n          }\n      };\n\n      self.setDefaultLevel = function (level) {\n          defaultLevel = level;\n          if (!getPersistedLevel()) {\n              self.setLevel(level, false);\n          }\n      };\n\n      self.resetLevel = function () {\n          self.setLevel(defaultLevel, false);\n          clearPersistedLevel();\n      };\n\n      self.enableAll = function(persist) {\n          self.setLevel(self.levels.TRACE, persist);\n      };\n\n      self.disableAll = function(persist) {\n          self.setLevel(self.levels.SILENT, persist);\n      };\n\n      // Initialize with the right level\n      var initialLevel = getPersistedLevel();\n      if (initialLevel == null) {\n          initialLevel = defaultLevel;\n      }\n      self.setLevel(initialLevel, false);\n    }\n\n    /*\n     *\n     * Top-level API\n     *\n     */\n\n    var defaultLogger = new Logger();\n\n    var _loggersByName = {};\n    defaultLogger.getLogger = function getLogger(name) {\n        if ((typeof name !== \"symbol\" && typeof name !== \"string\") || name === \"\") {\n          throw new TypeError(\"You must supply a name when creating a logger.\");\n        }\n\n        var logger = _loggersByName[name];\n        if (!logger) {\n          logger = _loggersByName[name] = new Logger(\n            name, defaultLogger.getLevel(), defaultLogger.methodFactory);\n        }\n        return logger;\n    };\n\n    // Grab the current global log variable in case of overwrite\n    var _log = (typeof window !== undefinedType) ? window.log : undefined;\n    defaultLogger.noConflict = function() {\n        if (typeof window !== undefinedType &&\n               window.log === defaultLogger) {\n            window.log = _log;\n        }\n\n        return defaultLogger;\n    };\n\n    defaultLogger.getLoggers = function getLoggers() {\n        return _loggersByName;\n    };\n\n    // ES6 default export, for compatibility\n    defaultLogger['default'] = defaultLogger;\n\n    return defaultLogger;\n}));\n", "import loglevel from 'loglevel'\n\nif (process.env.NODE_ENV === 'production') {\n  // It should be this by default - but that isn't happening, so setting it manually\n  loglevel.setLevel('warn')\n} else {\n  loglevel.setLevel('debug')\n}\n\nexport default loglevel\n", "import log from './log' // eslint-disable-line\n\nconst requestProps = (authToken = false, extraProps = {}) => {\n  const headers = { 'Content-Type': 'application/json' }\n  if (authToken) {\n    headers.Authorization = `Bearer ${authToken}`\n  }\n\n  const defaultProps = {\n    method: 'POST', // because default to some method\n    async: true,\n    headers: headers,\n    contentType: 'json'\n  }\n  return { ...defaultProps, ...extraProps }\n}\n\n// Returns true/false\nconst isAuthTokenValid = (authUrl, authToken) => new Promise((resolve, reject) => {\n  const authStatusUrl = `${authUrl}/status`\n\n  return fetch(authStatusUrl, requestProps(authToken, { method: 'GET' }))\n    .then(response => response.json()\n      .then((json) => {\n        resolve(json.message !== 'missing user' && response.status === 200)\n      })\n    ).catch((e) => {\n      resolve(errorResponse(e))\n    })\n})\n\nconst getAuthToken = (authUrl, loginFormData) => new Promise((resolve, reject) => {\n  const rProps = {\n    method: 'POST',\n    async: true,\n    headers: { 'Content-Type': 'application/json' },\n    contentType: 'json',\n    body: loginFormData\n  }\n  return fetch(authUrl, rProps)\n    .then(response => response.json()\n      .then((json) => {\n        let result = {}\n        if (response.status !== 200 || typeof (json.review_token) === 'undefined' || json.review_token === null) {\n          result.message = ['error', json.message]\n        } else {\n          result = { authToken: json.review_token, currentName: json.name, message: ['success', 'authenticated'] }\n        }\n        resolve(result)\n      })\n    ).catch((e) => {\n      resolve(errorResponse(e))\n    })\n})\n\nconst submitRating = (ratingUrl, authToken, ratingFormData) => new Promise((resolve, reject) => {\n  const rProps = requestProps(authToken, { body: ratingFormData })\n\n  return fetch(ratingUrl, rProps)\n    .then(response => response.json()\n      .then((json) => {\n        if (response.status === 200) {\n          resolve({\n            success: true,\n            message: ['success', json.message],\n            share: json.share\n          })\n        } else {\n          resolve({ success: false, message: ['error', json.message] })\n        }\n      })\n    ).catch((e) => {\n      resolve(errorResponse(e))\n    })\n})\n\n// Just return an error message that includes the error\nconst errorResponse = (e) => {\n  return { success: false, message: ['error', `Error: ${e})`] }\n}\n\nexport default {\n  getAuthToken,\n  isAuthTokenValid,\n  requestProps, // Only exported for testing\n  submitRating\n}\n", "import log from './log' // eslint-disable-line\n\n// pause and rerun if DOM hasn't loaded\nconst retryIfMissing = (obj, func, ...args) => {\n  if (typeof (obj) === 'undefined' || obj === null) {\n    log.debug(`${func.name} requires an element not present in DOM, trying again in 50ms`)\n    setTimeout(func, 5000, ...args)\n    return true\n  }\n}\n\n// Internal\nconst baseUrl = () => {\n  return document.getElementById('body-popup').getAttribute('data-baseurl')\n}\n\n// Add a visual cue to show that you're attached to local\nconst renderLocalAlert = () => {\n  // If alert is already rendered, skip\n  if (document.getElementById('local-alert')) { return }\n  if (baseUrl().match(/http:\\/\\/localhost/i)) {\n    const localAlert = document.createElement('div')\n    localAlert.textContent = 'local convus'\n    localAlert.classList.add('text-gray-400', 'text-center')\n    localAlert.setAttribute('id', 'local-alert')\n    document.getElementById('body-popup').append(localAlert)\n  }\n}\n\nconst pageLoadedFunctions = () => {\n  renderLocalAlert() // Render local alert if it's warranted\n}\n\nconst hideAlerts = () => {\n  const visibleAlerts = document.querySelectorAll('.alert')\n  visibleAlerts.forEach(el => el.classList.add('hidden'))\n  const visibleShares = document.querySelectorAll('.shareVisible')\n  visibleShares.forEach(el => el.classList.add('hidden'))\n}\n\n// Internal\nconst copyShare = (event) => {\n  // Get the share wrapper\n  const el = event.target.closest('.shareVisible')\n  const shareText = el.getAttribute('data-sharetext')\n  // log.debug(`copyShare: ${shareText}`)\n  navigator.clipboard.writeText(shareText)\n  const copiedAlert = document.createElement('p')\n  copiedAlert.textContent = 'Copied results to clipboard'\n  copiedAlert.classList.add('text-center', 'px-2', 'py-2', 'mt-4')\n  el.append(copiedAlert)\n}\n\n// Internal\nconst shareDiv = (shareText) => {\n  const template = document.querySelector('#templates .shareTemplate')\n  const el = template.cloneNode(true)\n  el.classList.remove('shareTemplate')\n  el.classList.add('shareVisible')\n  el.setAttribute('data-sharetext', shareText)\n  el.querySelector('.btnShare').addEventListener('click', copyShare)\n  return el\n}\n\n// message is an array of: [kind, text]\nconst renderAlerts = (message, shareText = null) => {\n  hideAlerts()\n  const kind = message[0]\n  const text = message[1]\n  const body = document.getElementById('body-popup')\n  const alert = document.createElement('div')\n  alert.textContent = text\n  alert.classList.add(`alert-${kind}`, 'alert', 'my-4')\n  body.prepend(alert)\n\n  if (typeof (shareText) !== 'undefined' && shareText !== null) {\n    alert.after(shareDiv(shareText))\n  }\n}\n\n// closeMenu can be: [\"toggle\", true, false]\nconst toggleMenu = (event = false, closeMenu = 'toggle') => {\n  event && event.preventDefault()\n  const menuBtn = document.getElementById('rating-menu-btn')\n  const menu = document.getElementById('rating-menu')\n  const action = closeMenu === 'toggle' ? menu.classList.contains('active') : closeMenu\n  if (action) {\n    menu.classList.add('hidden')\n    menu.classList.remove('active')\n    menuBtn.classList.remove('active')\n  } else {\n    menu.classList.remove('hidden')\n    menu.classList.add('active')\n    menuBtn.classList.add('active')\n  }\n}\n\n// Not currently using - but want to remember how to do if necessary in the future\n// const closePopup = () { window.close }\n\nexport default {\n  hideAlerts,\n  pageLoadedFunctions,\n  renderAlerts,\n  toggleMenu,\n  retryIfMissing\n}\n", "import log from './log' // eslint-disable-line\nimport api from './api'\nimport utilities from './utilities'\n// only importing login for loginTime - shouldn't import the rest :/\nimport login from './login'\n\nconst updateRatingFields = (tabUrl, title) => {\n  const ratingUrlField = document.getElementById('submitted_url')\n  utilities.retryIfMissing(ratingUrlField, updateRatingFields, tabUrl, title)\n\n  ratingUrlField.value = tabUrl\n  document.getElementById('citation_title').value = title\n  document.getElementById('timezone').value = Intl.DateTimeFormat().resolvedOptions().timeZone\n}\n\nconst ratingTime = () => {\n  const ratingForm = document.getElementById('new_rating')\n\n  if (utilities.retryIfMissing(ratingForm, ratingTime)) { return }\n\n  // I think it's a good thing to attach the event listener to the rating form\n  ratingForm.addEventListener('submit', handleRatingSubmit)\n  // Attach the menu functionality\n  document.getElementById('rating-menu-btn').addEventListener('click', utilities.toggleMenu)\n  document.querySelectorAll('#rating-menu .form-control-check input').forEach(el => el.addEventListener('change', updateMenuCheck))\n  document.getElementById('logout-btn').addEventListener('click', login.logout)\n  // ... but only show or hide the form if authToken is set, in case of weird callback stuff\n  if (window.authToken) {\n    document.getElementById('new_user').classList.add('hidden')\n    ratingForm.classList.remove('hidden')\n  }\n  // not required, just nice to have username to keep track of what's going on\n  if (window.currentName) {\n    document.getElementById('username').textContent = window.currentName\n  }\n  utilities.pageLoadedFunctions()\n}\n\n// Internal\nconst formNewRatingUrl = () => document.getElementById('new_rating')?.getAttribute('action')\n\n// Internal\nconst handleRatingSubmit = async function (e) {\n  e.preventDefault()\n  const formData = new FormData(document.getElementById('new_rating'))\n  const jsonFormData = JSON.stringify(Object.fromEntries(formData))\n  const result = await api.submitRating(formNewRatingUrl(), window.authToken, jsonFormData)\n\n  log.debug(result)\n  utilities.renderAlerts(result.message, result.share)\n  if (result.success) {\n    document.getElementById('new_rating').classList.add('hidden')\n    utilities.toggleMenu(false, true)\n  }\n\n  return false // fallback prevent submit\n}\n\n// Internal\nconst updateMenuCheck = (event) => {\n  const el = event.target\n  const fieldId = el.getAttribute('data-target-id')\n\n  if (el.checked) {\n    document.getElementById(fieldId).classList.remove('hidden')\n  } else {\n    document.getElementById(fieldId).classList.add('hidden')\n  }\n}\n\nexport default {\n  ratingTime,\n  updateRatingFields\n}\n", "import log from './log' // eslint-disable-line\nimport api from './api'\nimport utilities from './utilities'\n// only importing rating for ratingTime - shouldn't import the rest :/\nimport rating from './rating'\n\n// Internal\nconst formAuthUrl = () => document.getElementById('new_user')?.getAttribute('action')\n\n// Internal\nconst handleLoginSubmit = async function (e) {\n  e.preventDefault()\n  const formData = new FormData(document.getElementById('new_user'))\n  const jsonFormData = JSON.stringify(Object.fromEntries(formData))\n\n  const result = await api.getAuthToken(formAuthUrl(), jsonFormData)\n  log.debug(result)\n\n  if (typeof (result.authToken) === 'undefined' || result.authToken === null) {\n    utilities.renderAlerts(result.message)\n  } else {\n    browser.storage.local.set(result)\n    window.authToken = result.authToken\n    window.currentName = result.currentName\n    utilities.hideAlerts()\n    rating.ratingTime()\n  }\n\n  return false // fallback prevent submit\n}\n\nconst checkAuthToken = async function (token) {\n  const authUrl = formAuthUrl()\n  if (utilities.retryIfMissing(authUrl, checkAuthToken, token)) { return }\n\n  // log.debug('checking rating token:', token)\n  const result = await api.isAuthTokenValid(authUrl, token)\n  if (result) { return }\n  // Remove the existing data that is incorrect - maybe actually do in form submit?\n  browser.storage.local.remove('authToken')\n  browser.storage.local.remove('name')\n  window.authToken = undefined\n  loginTime()\n}\n\nconst loginTime = () => {\n  const loginForm = document.getElementById('new_user')\n  if (utilities.retryIfMissing(loginForm, loginTime)) { return }\n\n  loginForm.classList.remove('hidden')\n  document.getElementById('new_rating')?.classList?.add('hidden')\n  loginForm.addEventListener('submit', handleLoginSubmit)\n  utilities.pageLoadedFunctions()\n}\n\nconst logout = () => {\n  browser.storage.local.remove('authToken')\n  utilities.toggleMenu(false, true)\n  loginTime()\n}\n\nexport default {\n  checkAuthToken,\n  loginTime,\n  logout\n}\n", "import log from './log' // eslint-disable-line\nimport login from './login'\nimport rating from './rating'\n\n// Oh Chrome, it would be great if you used `browser` instead of `chrome`\nif (process.env.browser_target == 'chrome') { browser = chrome } // eslint-disable-line\n\nbrowser.storage.local.get(['authToken', 'currentName'])\n  .then(data => {\n    if (typeof (data.authToken) === 'undefined' || data.authToken === null) {\n      login.loginTime()\n    } else {\n      window.authToken = data.authToken\n      window.currentName = data.currentName\n      rating.ratingTime()\n      login.checkAuthToken(data.authToken)\n    }\n  })\n\nbrowser.tabs.query({ active: true, currentWindow: true }, function (tabs) {\n  // since only one tab should be active and in the current window at once\n  // the return variable should only have one entry\n  const activeTab = tabs[0]\n  // window.storedTabUrl = activeTab.url // this is available in updateRatingFields\n  // log.debug(tabs[0])\n  // log.debug(activeTab)\n  rating.updateRatingFields(activeTab.url, activeTab.title)\n})\n"],
  "mappings": "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",
  "names": ["loglevel"]
}
